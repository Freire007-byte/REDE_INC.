<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INC.NEXUS | V74 SELF-HEALING</title>
    <style>
        :root { --bg: #000; --cyan: #00f2ff; --neon: #39ff14; --bots: #ff00ff; }
        body { background: var(--bg); color: #fff; font-family: "SF Mono", monospace; margin: 0; overflow: hidden; display: flex; align-items: center; justify-content: center; height: 100vh; }
        
        #canvas { position: absolute; top: 0; left: 0; z-index: 1; opacity: 0.4; }
        
        .terminal { position: relative; z-index: 2; background: rgba(8, 8, 8, 0.9); border: 1px solid #1a1a1a; padding: 30px; border-radius: 24px; width: 90%; max-width: 450px; backdrop-filter: blur(10px); }
        .label { font-size: 0.5em; color: #444; text-transform: uppercase; letter-spacing: 2px; }
        .val { font-size: 1.6em; font-weight: 900; color: var(--cyan); margin: 10px 0; }
        .dna { font-size: 0.7em; color: var(--neon); word-break: break-all; margin: 15px 0; background: #000; padding: 10px; border-radius: 8px; border-left: 2px solid var(--neon); }
        .bot-army { color: var(--bots); font-weight: bold; font-size: 0.9em; }
        .status-tag { display: inline-block; padding: 4px 12px; border-radius: 20px; font-size: 0.5em; font-weight: bold; border: 1px solid var(--neon); color: var(--neon); margin-top: 10px; }
    </style>
</head>
<body>

    <canvas id="canvas"></canvas>

    <div class="terminal">
        <div style="text-align:center; font-weight:900; letter-spacing:3px; margin-bottom:20px;">INC.NEXUS // WEB 4.0</div>
        
        <div class="label">Quantum DNA Stream (Lattice-2500)</div>
        <div class="dna" id="dna">INITIALIZING_MESH...</div>

        <div style="display:flex; justify-content:space-between; align-items:end;">
            <div>
                <div class="label">Lastro de Liquidez</div>
                <div class="val" id="lastro">$ 4.937,17</div>
            </div>
            <div style="text-align:right;">
                <div class="label">Auto-Regeneração</div>
                <div class="bot-army" id="bots">1,000,000,000</div>
            </div>
        </div>

        <div style="text-align:center; margin-top:20px;">
            <div class="status-tag">STATUS: ATIVO & PROTEGIDO</div>
            <div style="font-size: 0.5em; color: #333; margin-top: 15px;">"A matemática é a única democracia verdadeira."</div>
        </div>
    </div>

    <script>
        // Animação da Malha de 2500 Fios
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let lines = [];

        function resize() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.onresize = resize;
        resize();

        class Thread {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.vx = (Math.random() - 0.5) * 0.5;
                this.vy = (Math.random() - 0.5) * 0.5;
            }
            update() {
                this.x += this.vx; this.y += this.vy;
                if(this.x < 0 || this.x > canvas.width) this.vx *= -1;
                if(this.y < 0 || this.y > canvas.height) this.vy *= -1;
            }
        }

        for(let i=0; i<100; i++) lines.push(new Thread());

        function animate() {
            ctx.clearRect(0,0,canvas.width, canvas.height);
            ctx.strokeStyle = '#00f2ff';
            ctx.lineWidth = 0.2;
            for(let i=0; i<lines.length; i++) {
                lines[i].update();
                for(let j=i+1; j<lines.length; j++) {
                    let dist = Math.hypot(lines[i].x - lines[j].x, lines[i].y - lines[j].y);
                    if(dist < 150) {
                        ctx.beginPath();
                        ctx.moveTo(lines[i].x, lines[i].y);
                        ctx.lineTo(lines[j].x, lines[j].y);
                        ctx.stroke();
                    }
                }
            }
            requestAnimationFrame(animate);
        }
        animate();

        // Sincronia de Dados
        async function sync() {
            try {
                const res = await fetch(`/status?wallet_id=USER_NODE`);
                const d = await res.json();
                document.getElementById('dna').innerText = d.dna;
                document.getElementById('bots').innerText = d.bots.toLocaleString();
                document.getElementById('lastro').innerText = "$ " + d.lastro.toLocaleString('pt-BR', {minimumFractionDigits: 2});
            } catch(e) {}
        }
        setInterval(sync, 2000);
        sync();
    </script>
</body>
</html>
